[
  {
    "id": "TEST-001",
    "category": "server",
    "description": "Add optional duration parameter to admin:spawnChariot socket handler. Server should accept `{ duration?: number }` and use provided value or default to 3000ms. This allows tests to spawn long-duration mechanics for screenshot testing.",
    "steps_to_verify": [
      "In src/server/index.ts, find the admin:spawnChariot handler",
      "Verify it accepts optional params: `(params?: { duration?: number })`",
      "Verify it uses `params?.duration ?? 3000` when calling game.spawnChariot()",
      "Start dev server, open browser to localhost:3000?debug=1",
      "In browser console: `__adminTest.emitSpawnChariot({ duration: 10000 })`",
      "Verify debug panel shows mechanic with ~10000ms until expiry (check data-expires attribute)",
      "Verify default still works: `__adminTest.emitSpawnChariot()` creates ~3000ms mechanic"
    ],
    "passes": true
  },
  {
    "id": "TEST-002",
    "category": "server",
    "description": "Add optional duration parameter to admin:spawnSpreads socket handler. Server should accept `{ duration?: number }` and use provided value or default to 3000ms.",
    "steps_to_verify": [
      "In src/server/index.ts, find the admin:spawnSpreads handler",
      "Verify it accepts optional params: `(params?: { duration?: number })`",
      "Verify it uses `params?.duration ?? 3000` when spawning spreads",
      "Start dev server, open browser to localhost:3000?debug=1",
      "In browser console: `__adminTest.emitSpawnSpreads({ duration: 10000 })`",
      "Verify debug panel shows spread mechanic(s) with ~10000ms until expiry",
      "Verify default still works: `__adminTest.emitSpawnSpreads()` creates ~3000ms mechanic"
    ],
    "passes": false
  },
  {
    "id": "TEST-003",
    "category": "server",
    "description": "Add optional delay and knockbackDuration parameters to admin:spawnRadialKnockback socket handler. Server should accept `{ delay?: number, knockbackDuration?: number }` with defaults of 2000ms delay and 500ms knockbackDuration.",
    "steps_to_verify": [
      "In src/server/index.ts, find the radialKnockback spawn handler",
      "Verify it accepts optional params: `(params?: { delay?: number, knockbackDuration?: number })`",
      "Verify it uses `params?.delay ?? 2000` and `params?.knockbackDuration ?? 500`",
      "Start dev server, open browser to localhost:3000?debug=1",
      "In browser console: `__adminTest.emitSpawnRadialKnockback({ delay: 8000 })`",
      "Verify debug panel shows mechanic with ~8000ms until resolve (not default 2000ms)",
      "Test knockbackDuration override: `__adminTest.emitSpawnRadialKnockback({ delay: 100, knockbackDuration: 2000 })`",
      "After resolve, player knockback animation should last ~2 seconds (not 500ms)"
    ],
    "passes": false
  },
  {
    "id": "TEST-004",
    "category": "server",
    "description": "Add optional delay and knockbackDuration parameters to admin:spawnLinearKnockback socket handler. Server should accept `{ delay?: number, knockbackDuration?: number }` with defaults of 2000ms delay and 500ms knockbackDuration.",
    "steps_to_verify": [
      "In src/server/index.ts, find the linearKnockback spawn handler",
      "Verify it accepts optional params: `(params?: { delay?: number, knockbackDuration?: number })`",
      "Verify it uses `params?.delay ?? 2000` and `params?.knockbackDuration ?? 500`",
      "Start dev server, open browser to localhost:3000?debug=1",
      "In browser console: `__adminTest.emitSpawnLinearKnockback({ delay: 8000 })`",
      "Verify debug panel shows mechanic with ~8000ms until resolve",
      "Verify default still works with ~2000ms delay"
    ],
    "passes": false
  },
  {
    "id": "TEST-005",
    "category": "server",
    "description": "Add optional duration parameter to admin:spawnPointTethers and admin:spawnPlayerTethers socket handlers. Server should accept `{ duration?: number }` and use provided value or default to 3000ms.",
    "steps_to_verify": [
      "In src/server/index.ts, find admin:spawnPointTethers and admin:spawnPlayerTethers handlers",
      "Verify both accept optional params: `(params?: { duration?: number })`",
      "Verify both use `params?.duration ?? 3000` when creating tethers",
      "Start dev server, open browser to localhost:3000?debug=1",
      "In browser console: `__adminTest.emitSpawnPointTethers({ duration: 10000 })`",
      "Verify debug panel shows tether mechanic with ~10000ms until expiry",
      "Test player tethers: `__adminTest.emitSpawnPlayerTethers({ duration: 10000 })`",
      "Verify default still works with ~3000ms duration"
    ],
    "passes": false
  },
  {
    "id": "TEST-006",
    "category": "server",
    "description": "Add optional duration parameter to admin:spawnTower socket handler. Server should accept `{ duration?: number }` and use provided value or default to 5000ms.",
    "steps_to_verify": [
      "In src/server/index.ts, find the admin:spawnTower handler",
      "Verify it accepts optional params: `(params?: { duration?: number })`",
      "Verify it uses `params?.duration ?? 5000` when creating tower",
      "Start dev server, open browser to localhost:3000?debug=1",
      "In browser console: `__adminTest.emitSpawnTower({ duration: 15000 })`",
      "Verify debug panel shows tower mechanic with ~15000ms until expiry",
      "Verify default still works: `__adminTest.emitSpawnTower()` creates ~5000ms mechanic"
    ],
    "passes": false
  },
  {
    "id": "TEST-007",
    "category": "client",
    "description": "Update all __adminTest emit methods in src/client/admin.ts to accept and forward optional timing parameters to the server. Methods should have TypeScript types for the params object.",
    "steps_to_verify": [
      "In src/client/admin.ts, verify emitSpawnChariot accepts `(params?: { duration?: number })`",
      "Verify emitSpawnSpreads accepts `(params?: { duration?: number })`",
      "Verify emitSpawnRadialKnockback accepts `(params?: { delay?: number, knockbackDuration?: number })`",
      "Verify emitSpawnLinearKnockback accepts `(params?: { delay?: number, knockbackDuration?: number })`",
      "Verify emitSpawnPointTethers accepts `(params?: { duration?: number })`",
      "Verify emitSpawnPlayerTethers accepts `(params?: { duration?: number })`",
      "Verify emitSpawnTower accepts `(params?: { duration?: number })`",
      "Verify all methods forward params to socket.emit()",
      "Run `npm run build` - should pass with no TypeScript errors"
    ],
    "passes": false
  },
  {
    "id": "TEST-008",
    "category": "docs",
    "description": "Add 'Time-Sensitive Testing' section to CLAUDE.md explaining how to use timing overrides for testing. Include examples of using __adminTest with duration params and browser_run_code for atomic operations.",
    "steps_to_verify": [
      "In CLAUDE.md, find or add a '### Time-Sensitive Testing' section under the Testing heading",
      "Section explains the problem: mechanics expire in 1-5s, sequential tool calls take longer",
      "Section shows example of timing overrides: `__adminTest.emitSpawnChariot({ duration: 10000 })`",
      "Section shows example of knockback delay override: `__adminTest.emitSpawnRadialKnockback({ delay: 5000 })`",
      "Section shows browser_run_code pattern for atomic click+screenshot operations",
      "Section includes tip: check data-expires attribute before debugging visuals"
    ],
    "passes": false
  }
]
