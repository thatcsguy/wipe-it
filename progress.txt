WIPE-001, WIPE-002, WIPE-003, WIPE-012 COMPLETE

Added wipe system foundation types:
- PlayerState.dead: boolean (types.ts:62)
- GameState.godMode/wipeInProgress/readyPlayerIds (types.ts:249-251)
- Player class: dead field, setDead(), toState() updated (player.ts)
- Game class: godMode=true, wipeInProgress=false, readyPlayers Set (game.ts)
- broadcast() and getState() include new fields

Files changed:
- src/shared/types.ts
- src/server/player.ts
- src/server/game.ts
- src/client/game.ts (init state defaults)

Build passes. Playwright verified fields broadcast correctly.

WIPE-004 COMPLETE

Dead player freeze in processInput():
- Early return after lastProcessedInput update, before knockback check
- Dead players: no WASD, no knockback position updates
- lastProcessedInput still updated for client reconciliation

Files changed:
- src/server/player.ts (line 53-56)

WIPE-005, WIPE-006 COMPLETE

Game class wipe control methods:
- activeScript: Script | null = null (completes WIPE-005)
- toggleGodMode(): flips this.godMode
- isWipeTriggered(): returns this.wipeInProgress

Files changed:
- src/server/game.ts (import Script, add field, add methods)

WIPE-007 COMPLETE

triggerWipe() method:
- Sets wipeInProgress = true
- Emits 'wipe:started' to all clients via io.emit()
- Added admin:triggerWipe socket handler for testing
- Added emitTriggerWipe() to __adminTest

Files changed:
- src/server/game.ts (triggerWipe method line 375-378)
- src/server/index.ts (admin:triggerWipe handler)
- src/client/admin.ts (emitTriggerWipe test method)

Playwright verified: wipeInProgress false->true after triggerWipe()

WIPE-008 COMPLETE

Death detection in Game.tick():
- After doodad tick, checks !godMode && !wipeInProgress
- If player.hp <= 0 && !player.dead: setDead(true), triggerWipe()
- Break after first death to trigger once per tick
- Also added admin:toggleGodMode handler (partial WIPE-014)

Files changed:
- src/server/game.ts (death detection in tick, lines 186-195)
- src/server/index.ts (admin:toggleGodMode handler)
- src/client/admin.ts (emitToggleGodMode test method)

Playwright verified: god mode off -> tutorial encounter damage -> hp=0 -> dead=true, wipeInProgress=true

WIPE-009, WIPE-010, WIPE-011 COMPLETE (partial WIPE-014)

Ready/reset system:
- setPlayerReady(socketId): adds to readyPlayers Set, calls resetEncounter() when all ready
- resetEncounter(): heals all to MAX_HP, clears dead flags, clears readyPlayers, wipeInProgress=false, emits 'wipe:reset', re-runs activeScript if set
- setActiveScript(script): stores script for restart after reset
- player:ready socket handler in index.ts
- emitPlayerReady() added to __adminTest

Files changed:
- src/server/game.ts (lines 391-424)
- src/server/index.ts (player:ready handler)
- src/client/admin.ts (emitPlayerReady test method)

Playwright verified: death -> wipe -> ready -> reset -> hp=100, dead=false, wipeInProgress=false

WIPE-013 COMPLETE

Script spawn blocking during wipe:
- ScriptRunnerImpl.spawn() checks this.game.isWipeTriggered() at start
- Returns '' immediately if wipe in progress, no mechanic spawned
- Only affects script-driven spawns, admin buttons still work (direct Game methods)

Files changed:
- src/server/encounters/script-runner.ts (line 76-79)

Playwright verified: trigger wipe -> run tutorial encounter -> mechanics count stays 0

WIPE-017, WIPE-018, WIPE-019, WIPE-020, WIPE-025, WIPE-026, WIPE-027, WIPE-028, WIPE-029 COMPLETE

Wipe overlay UI:
- Created src/client/wipeOverlay.ts with initWipeOverlay(), showWipeOverlay(), hideWipeOverlay(), updateReadyState(), updatePlayerList()
- DOM structure: #wipe-overlay contains .wipe-banner ("WIPE IT!") + .ready-check with .ready-message + .ready-list
- .player-entry elements have data-player-id attr, .ready class added for ready players
- CSS: Permanent Marker font import, slideInFromRight animation for banner
- Red banner with text-shadow, semi-transparent ready-check box
- Green checkmark via ::before pseudo-element on .player-entry.ready
- Integrated into game.ts: init on startGame, show/update on wipeInProgress state, hide on wipe:reset event

Files changed:
- src/client/wipeOverlay.ts (new)
- src/client/game.ts (import + init + state handler + wipe:reset listener)
- public/css/style.css (font import + wipe overlay styles)

Playwright verified: trigger wipe -> overlay shows -> banner + ready message + player list visible

WIPE-021 COMPLETE

R key listener for ready during wipe:
- Added keydown listener in startGame() for 'r' key
- Checks currentGameState.wipeInProgress before emitting
- Emits 'player:ready' socket event when conditions met

Files changed:
- src/client/game.ts (lines 239-244)

Playwright verified: trigger wipe -> press R -> reset triggers -> overlay hides

WIPE-014, WIPE-015, WIPE-016 COMPLETE

Dead player visual (red X):
- drawDeadX() helper draws two diagonal red lines through player circle
- drawPlayerAt() accepts optional dead param, calls drawDeadX() when true
- render() passes player.dead to all drawPlayerAt() calls
- Also marked WIPE-014 complete (socket handlers existed from WIPE-008)

Files changed:
- src/client/renderer.ts (drawDeadX fn, dead param in drawPlayerAt, render calls)

Playwright verified: tutorial encounter -> death -> red X visible over player circle

WIPE-022 COMPLETE

Client-side dead player prediction skip:
- Added localDead tracking in localStatus.ts (updateLocalDead(), isLocalDead())
- game.ts calls updateLocalDead(myPlayer.dead) on state updates
- applyInput() in network.ts checks isLocalDead() first, returns early if true
- Dead players can't move locally even with client prediction

Files changed:
- src/client/localStatus.ts (localDead var, updateLocalDead, isLocalDead, exports)
- src/client/game.ts (import updateLocalDead, call in state handler)
- src/client/network.ts (import isLocalDead, early return in applyInput)

Playwright verified: death -> applyInput with WASD -> position unchanged (400,400)

WIPE-023, WIPE-024 COMPLETE

God Mode toggle button in admin UI:
- Added #toggle-godmode-btn to Utility section in index.html
- Click handler emits 'admin:toggleGodMode' socket event
- Logs "Toggled god mode" to combat log
- __adminTest.emitToggleGodMode already existed from WIPE-008

Files changed:
- public/index.html (button added line 51)
- src/client/admin.ts (click handler added lines 89-97)

Playwright verified: click toggle -> godMode false->true->false

WIPE-030, WIPE-040 COMPLETE

E2E + build validation:
- WIPE-030: God Mode toggle E2E test passes
  - Navigate to localhost:3000?debug=1
  - Initial godMode=true, click toggle -> godMode=false, click again -> godMode=true
- WIPE-040: Build passes (npm run build)

No files changed (validation only)
