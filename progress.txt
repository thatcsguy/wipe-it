AOE-001 COMPLETE: Added LineAoeMechanicState and ConalAoeMechanicState types
- Added 'lineAoe' and 'conalAoe' to MechanicType union
- LineAoeMechanicState: startX/Y, endX/Y (line center points), width, startTime, endTime, effects[]
- ConalAoeMechanicState: centerX/Y (origin), endpointX/Y (arc midpoint), angle (radians), startTime, endTime, effects[]
- Added both to MechanicState union
- Build passes
Files: src/shared/types.ts

AOE-002 COMPLETE: Created LineAoe server mechanic
- LineAoeMechanic class implements BaseMechanic interface
- ID format: lineAoe-{timestamp}-{random}
- Point-in-rotated-rectangle collision: transform to local coords (line direction + perpendicular), check bounds
- resolve() applies effects to players inside rectangle
- toState() returns LineAoeMechanicState
- Build passes
Files: src/server/mechanics/lineAoe.ts

AOE-003 COMPLETE: Created ConalAoe server mechanic
- ConalAoeMechanic class implements BaseMechanic interface
- ID format: conalAoe-{timestamp}-{random}
- Radius computed as distance from center to endpoint
- Point-in-sector collision: check dist <= radius AND angle within +/-(angle/2) of cone direction
- normalizeAngle() handles wraparound for angles near +/- PI
- resolve() applies effects to players inside sector
- toState() returns ConalAoeMechanicState
- Build passes
Files: src/server/mechanics/conalAoe.ts

AOE-004 COMPLETE: Added spawnLineAoe and spawnConalAoe to Game class
- spawnLineAoe(startX, startY, endX, endY, width, duration, effects): creates LineAoeMechanic, adds to manager
- spawnConalAoe(centerX, centerY, endpointX, endpointY, angle, duration, effects): creates ConalAoeMechanic, adds to manager
- No default effects (required param per PRD)
- Build passes
Files: src/server/game.ts

AOE-005 COMPLETE: Added admin:spawnLineAoe socket handler
- Server: socket.on('admin:spawnLineAoe') spawns vertical line through arena center
- Default: startX/endX = ARENA_WIDTH/2, startY = 0, endY = ARENA_HEIGHT, width = 100, duration = 3000ms
- Effects: [{ type: 'damage', amount: 25 }]
- Client: __adminTest.emitSpawnLineAoe({ duration?: number }) added
- Verified with Playwright: mechanic appears with data-type='lineAoe', correct ID format, expiry countdown
Files: src/server/index.ts, src/client/admin.ts

AOE-006 COMPLETE: Added admin:spawnConalAoe socket handler
- Server: socket.on('admin:spawnConalAoe') spawns 90-degree cone pointing right from arena center
- Default: centerX/Y = ARENA_WIDTH/2, ARENA_HEIGHT/2; endpointX = centerX + 200, endpointY = centerY
- Angle = Math.PI/2 (90 degrees), duration = 3000ms, effects = [{ type: 'damage', amount: 25 }]
- Client: __adminTest.emitSpawnConalAoe({ duration?: number }) added
- Verified with Playwright: data-type='conalAoe', ID format conalAoe-{ts}-{random}, correct expiry
Files: src/server/index.ts, src/client/admin.ts

AOE-007 COMPLETE: Created Line AOE renderer
- renderLineAoe() draws rotated rectangle using perpendicular vectors
- Calculates 4 corners from start/end center points + width
- Fill: chariot orange (255,159,64) at alpha 0.3
- Inner glow: 70% width inner rectangle at alpha 0.5
- Border stroke: #ff9f40, 2px width
- Also added to dispatcher (index.ts) for testing
- Verified with Playwright: orange vertical rectangle renders correctly
Files: src/client/mechanics/lineAoe.ts, src/client/mechanics/index.ts

AOE-008 COMPLETE: Created Conal AOE renderer
- renderConalAoe() draws pie slice using ctx.arc()
- Direction = atan2(endpointY-centerY, endpointX-centerX), startAngle = direction - angle/2, endAngle = direction + angle/2
- Path: moveTo(center), arc(center, radius, startAngle, endAngle), closePath
- Fill: chariot orange (255,159,64) at alpha 0.3
- Inner glow: 70% radius inner sector at alpha 0.5
- Border stroke: #ff9f40, 2px width
- Added to dispatcher (index.ts) - case 'conalAoe' calls renderConalAoe
- Verified with Playwright: orange 90-degree cone pointing right from arena center, radius ~200px
Files: src/client/mechanics/conalAoe.ts, src/client/mechanics/index.ts

AOE-009 COMPLETE: Updated mechanic dispatcher
- Added import for renderConalAoe from './conalAoe'
- Added else if case: mechanic.type === 'conalAoe' calls renderConalAoe(ctx, mechanic)
- Build passes
- Both lineAoe and conalAoe now render via dispatcher
Files: src/client/mechanics/index.ts
