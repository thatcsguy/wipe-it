=== KB-001, KB-002, KB-003 - Knockback Type Definitions ===
- Added RadialKnockbackMechanicState interface (type, id, originX/Y, startTime, endTime, knockbackDistance, knockbackDuration)
- Added LinearKnockbackMechanicState interface (type, id, lineStartX/Y, lineEndX/Y, startTime, endTime, knockbackDistance, knockbackDuration)
- Added KnockbackState interface (startTime, startX/Y, endX/Y, duration)
- Added optional knockback property to PlayerState
- Updated MechanicType and MechanicState unions
- Files: src/shared/types.ts
- Build passes

=== KB-004 - easeOutCubic Function ===
- Created src/shared/knockback.ts with easeOutCubic(t) = 1 - (1-t)^3
- Verified: easeOutCubic(0)=0, easeOutCubic(1)=1, easeOutCubic(0.5)=0.875
- Files: src/shared/knockback.ts
- Build passes

=== KB-005 - getKnockbackPosition Function ===
- Added KnockbackPositionResult interface {x, y, active}
- Implemented getKnockbackPosition(knockback, currentTime)
- Returns active=false + endX/Y when elapsed >= duration
- Uses easeOutCubic for interpolation between start/end positions
- Files: src/shared/knockback.ts
- Build passes

=== KB-006 - getKnockbackDirection Function ===
- Added KnockbackDirection interface {x, y}
- getRadialKnockbackDirection: normalized(playerPos - origin), handles player-at-origin edge case
- getLinearKnockbackDirection: perpendicular using (lineY/len, -lineX/len) - righthand side
- Files: src/shared/knockback.ts
- Build passes

=== KB-007 - isOnKnockbackSide Function ===
- Cross product: (bx-ax)*(py-ay) - (by-ay)*(px-ax)
- Returns true when cross < 0 (right side walking A to B = knockback side)
- Files: src/shared/knockback.ts
- Build passes

=== KB-008 - calculateKnockbackEndpoint Function ===
- Added KnockbackEndpoint interface {x, y}
- Calculates theoretical endpoint: start + direction * distance
- Clamps to arena bounds: PLAYER_RADIUS to ARENA_SIZE - PLAYER_RADIUS
- Files: src/shared/knockback.ts
- Build passes

=== KB-012 - Player.applyKnockback Method ===
- Added knockback property to Player class (KnockbackState | undefined)
- applyKnockback(dirX, dirY, distance, duration, now) - applies knockback
- Returns early if this.knockback exists (ignores new knockback during active one)
- Pre-calculates wall-clamped endpoint using calculateKnockbackEndpoint
- Sets knockback with all 6 fields: startTime, startX/Y, endX/Y, duration
- Updated toState() to include knockback in serialized state
- Files: src/server/player.ts
- Build passes

=== KB-009 - RadialKnockbackMechanic Class ===
- Created RadialKnockbackMechanic implementing BaseMechanic
- Constructor: originX/Y, delay, knockbackDistance, knockbackDuration
- resolve() iterates ALL players, calculates direction from origin → player, calls player.applyKnockback
- Uses getRadialKnockbackDirection from shared/knockback.ts
- toState() returns RadialKnockbackMechanicState
- Files: src/server/mechanics/radialKnockback.ts
- Build passes

=== KB-010 - LinearKnockbackMechanic Class ===
- Created LinearKnockbackMechanic implementing BaseMechanic
- Constructor: lineStartX/Y, lineEndX/Y, delay, knockbackDistance, knockbackDuration
- resolve() uses isOnKnockbackSide to filter players (only right side of line)
- Knockback direction perpendicular to line via getLinearKnockbackDirection (same for all affected)
- toState() returns LinearKnockbackMechanicState
- Files: src/server/mechanics/linearKnockback.ts
- Build passes

=== KB-011 - Register Knockback Mechanics + Spawn Methods ===
- Added imports for RadialKnockbackMechanic and LinearKnockbackMechanic in game.ts
- Added spawnRadialKnockback(originX, originY, startDelay, knockbackDistance, knockbackDuration)
- Added spawnLinearKnockback(lineStartX/Y, lineEndX/Y, startDelay, knockbackDistance, knockbackDuration)
- MechanicManager already type-agnostic (uses BaseMechanic interface), no changes needed
- Mechanic state broadcast via existing getStates() → broadcast() path
- Files: src/server/game.ts
- Build passes

=== KB-013 - processInput() Knockback Handling ===
- Modified processInput(input, now) signature to accept current timestamp
- ALWAYS sets lastProcessedInput = seq first (even during knockback)
- Checks this.knockback: if active, updates position via getKnockbackPosition()
- Clears knockback when active=false
- Returns early during knockback (skips WASD processing)
- Updated game.ts tick() to pass now param to processInput()
- Files: src/server/player.ts, src/server/game.ts
- Build passes

=== KB-014 - tick() Knockback Updates ===
- Added knockback position update loop in tick() after input processing
- Iterates all players, checks for active knockback
- Updates position via getKnockbackPosition(player.knockback, now)
- Clamps to arena bounds (PLAYER_RADIUS to ARENA_SIZE - PLAYER_RADIUS)
- Clears knockback when active=false
- This ensures 60Hz knockback updates even without player inputs queued
- Added imports: getKnockbackPosition, PLAYER_RADIUS, ARENA_WIDTH, ARENA_HEIGHT
- Files: src/server/game.ts
- Build passes

=== KB-015, KB-016 - Client Knockback Reconciliation ===
- Added localKnockback state variable to network.ts
- Added getLocalKnockback() and isLocalKnockedBack() exports
- Modified reconcile() to sync knockback from serverPlayer.knockback
- During knockback: calculates position via getKnockbackPosition(localKnockback, state.timestamp)
- Skips input replay during active knockback
- Clears knockback when getKnockbackPosition returns active=false
- Added admin emit helpers for radialKnockback/linearKnockback
- Added server handlers for admin:spawnMechanic radialKnockback/linearKnockback types
- Tested with Playwright: radial knockback moves player away from center, linear only affects correct side
- Files: src/client/network.ts, src/client/admin.ts, src/server/index.ts
- Build passes

=== KB-021 - Admin Buttons for Knockback Mechanics ===
- Added #spawn-radial-kb-btn and #spawn-linear-kb-btn buttons to admin panel in index.html
- Added click event handlers in admin.ts that emit admin:spawnMechanic with type radialKnockback/linearKnockback
- Radial spawns at arena center (400,400), linear spawns horizontal line through center with southward knockback
- Verified with Playwright: both buttons visible, clicking spawns mechanics shown in debug panel
- Files: public/index.html, src/client/admin.ts
- Build passes

=== KB-019 - Debug Data Attributes for Knockback Mechanics ===
- Added RadialKnockbackMechanicState and LinearKnockbackMechanicState imports to debugPanel.ts
- Added conditional handling in updateMechanicsSection for both types
- Radial: data-origin-x, data-origin-y, data-kb-distance, data-kb-duration
- Linear: data-line-start-x/y, data-line-end-x/y, data-kb-distance, data-kb-duration
- Verified with Playwright: both mechanic types show correct attributes in debug panel
- Files: src/client/debugPanel.ts
- Build passes

=== KB-020 - Debug Data Attribute for Player Knockback State ===
- Added data-knockback-active attribute to .debug-player in updatePlayersSection()
- Set to 'true' when player.knockback exists, removed when undefined
- Verified with Playwright: attribute appears during active knockback, removed after
- Files: src/client/debugPanel.ts
- Build passes
